webpackJsonp([44],{267:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(502),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);var o=i(902),d=i.n(o),r=i(3),l=r(s.a,d.a,!1,null,null,null);l.options.__file="src/views/news-system/advertisement-positions/list.vue",e.default=l.exports},502:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(26),s=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default={data:function(){var t=this;return{loading:!1,search:{},tableStatus:{type:[]},feeds:{data:[],total:0,current_page:1,per_page:10},addEditAdvertisementPositionModal:{show:!1,saveLoading:!1},ruleAddEditAdvertisementPosition:{name:[{required:!0,message:"请填写广告位名称",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"blur"}]},addEditAdvertisementPositionForm:{id:0,name:"",type:"",description:""},columns:[{title:"ID",key:"id",sortable:!0,width:100},{title:"广告位名称",key:"name"},{title:"广告位描述",key:"description"},{title:"类型",render:function(e,i){return e("div",[e("Tag",{props:{type:"dot",color:"green"}},t.tableStatus.type[i.row.type])])}},{title:"创建时间",key:"created_at",sortable:!0},{title:"更新时间",key:"created_at"},{title:"操作",render:function(e,i){var a=t;return e("div",[e("Button",{props:{type:"success",size:"small"},on:{click:function(){a.addEditAdvertisementPositionForm=a.feeds.data[i.index],a.addEditAdvertisementPositionModal.show=!0}}},"Edit"),e("Poptip",{props:{confirm:!0,title:"您确定要删除「"+i.row.name+"」广告位？",transfer:!0},on:{"on-ok":function(){a.deleteBtn(i.row.id,i.index)}}},[e("Button",{style:{margin:"0 5px"},props:{type:"error",size:"small",placement:"top"}},"删除")])])}}]}},created:function(){var t=this;t.getList(t.feeds.current_page),t.getTableStatus()},methods:{getTableStatus:function(){var t=this;t.$util.ajax.get("/common_get_table_status/advertisement_positions/type").then(function(e){var i=e.data;t.tableStatus.type=i.data},function(t){})},handleOnPageChange:function(t){this.getList(t)},cleanModal:function(){this.addEditAdvertisementPositionForm={id:0,name:"",type:"",description:""}},handleSubmit:function(){var t=this;t.$refs.addEditAdvertisementPositionForm.validate(function(e){e&&(t.addEditAdvertisementPositionModal.saveLoading=!0,t.$util.ajax.post("/admin/advertisement_positions",t.addEditAdvertisementPositionForm).then(function(e){var i=e.data;t.$Notice.success({title:i.message}),t.getList(1),t.addEditAdvertisementPositionModal.saveLoading=!1,t.addEditAdvertisementPositionModal.show=!1},function(e){t.$Notice.warning({title:"出错了",desc:e.message}),t.addEditAdvertisementPositionModal.saveLoading=!1}))})},cancelEditPass:function(){var t=this;t.addEditAdvertisementPositionModal.show=!1,t.addEditAdvertisementPositionModal.saveLoading=!1,t.cleanModal()},addBtn:function(){this.cleanModal(),this.addEditAdvertisementPositionModal.show=!0},getList:function(t){var e=this;e.loading=!0,e.feeds.current_page=t,e.$util.ajax.get("/admin/advertisement_positions?page="+t+"&per_page="+e.feeds.per_page+"&search_data="+(0,s.default)(e.search)).then(function(t){var i=t.data;e.feeds.data=i.data,e.feeds.total=i.meta.total,e.loading=!1},function(t){e.$Notice.warning({title:"出错了",desc:t.message}),e.loading=!1})},deleteBtn:function(t,e){var i=this;i.$util.ajax.delete("/admin/advertisement_positions/"+t).then(function(t){var a=t.data;i.feeds.data.splice(e,1),i.$Notice.success({title:a.message})},function(t){i.$Notice.warning({title:"出错了",desc:t.message})})}}}},902:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"news_system-advertisement_positions-list"}},[i("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"end",gutter:16}},[i("Col",{attrs:{span:"3"}},[i("Input",{attrs:{icon:"search",placeholder:"请输入广告位名称..."},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),t._v(" "),i("Col",{attrs:{span:"3"}},[i("Select",{attrs:{placeholder:"请选择广告位类型"},model:{value:t.search.type,callback:function(e){t.$set(t.search,"type",e)},expression:"search.type"}},[i("Option",{key:"",attrs:{value:""}},[t._v("全部")]),t._v(" "),t._l(t.tableStatus.type,function(e,a){return i("Option",{key:a,attrs:{value:a}},[t._v(t._s(e))])})],2)],1),t._v(" "),i("Col",{attrs:{span:"2"}},[i("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:function(e){t.getList(1)}}},[t._v("Search")])],1),t._v(" "),i("Col",{attrs:{span:"2"}},[i("Button",{attrs:{type:"success",icon:"plus"},on:{click:function(e){t.addBtn()}}},[t._v("Add")])],1)],1),t._v(" "),i("br"),t._v(" "),i("Row",[i("Table",{attrs:{border:"",columns:t.columns,data:t.feeds.data,loading:t.loading}}),t._v(" "),i("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[i("div",{staticStyle:{float:"right"}},[i("Page",{staticClass:"paging",attrs:{total:t.feeds.total,current:t.feeds.current_page,"page-size":t.feeds.per_page,"show-elevator":"","show-total":""},on:{"on-change":t.handleOnPageChange}})],1)])],1),t._v(" "),i("Modal",{attrs:{closable:!1,"mask-closable":!1,width:500},model:{value:t.addEditAdvertisementPositionModal.show,callback:function(e){t.$set(t.addEditAdvertisementPositionModal,"show",e)},expression:"addEditAdvertisementPositionModal.show"}},[i("h3",{staticStyle:{color:"#2D8CF0"},attrs:{slot:"header"},slot:"header"},[t._v("编辑广告位")]),t._v(" "),i("Form",{ref:"addEditAdvertisementPositionForm",attrs:{model:t.addEditAdvertisementPositionForm,"label-width":100,"label-position":"right",rules:t.ruleAddEditAdvertisementPosition}},[i("FormItem",{attrs:{label:"广告位名称",prop:"name"}},[i("Input",{attrs:{placeholder:"请输入广告位名称"},model:{value:t.addEditAdvertisementPositionForm.name,callback:function(e){t.$set(t.addEditAdvertisementPositionForm,"name",e)},expression:"addEditAdvertisementPositionForm.name"}})],1),t._v(" "),i("FormItem",{attrs:{label:"广告位类型",prop:"type"}},[i("Select",{attrs:{filterable:""},model:{value:t.addEditAdvertisementPositionForm.type,callback:function(e){t.$set(t.addEditAdvertisementPositionForm,"type",e)},expression:"addEditAdvertisementPositionForm.type"}},t._l(t.tableStatus.type,function(e,a){return i("Option",{key:a,attrs:{value:a}},[t._v(t._s(e))])}))],1),t._v(" "),i("FormItem",{attrs:{label:"广告位描述",prop:"description"}},[i("Input",{attrs:{type:"textarea",placeholder:"请输入描述"},model:{value:t.addEditAdvertisementPositionForm.description,callback:function(e){t.$set(t.addEditAdvertisementPositionForm,"description",e)},expression:"addEditAdvertisementPositionForm.description"}})],1)],1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:t.cancelEditPass}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{type:"primary",loading:t.addEditAdvertisementPositionModal.saveLoading},on:{click:t.handleSubmit}},[t._v("\n                保存\n            ")])],1)],1)],1)},s=[];a._withStripped=!0;var n={render:a,staticRenderFns:s};e.default=n}});
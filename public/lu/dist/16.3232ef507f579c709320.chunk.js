webpackJsonp([16],{271:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(507),r=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);var i=a(910),o=a.n(i),l=a(3),c=l(r.a,o.a,!1,null,null,null);c.options.__file="src/views/news-system/articles/list.vue",t.default=c.exports},507:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(26),s=n(r),i=a(908),o=n(i);t.default={components:{expandRow:o.default},data:function(){var e=this;return{modalHeadImage:{show:!1,url:null},loading:!1,search:{},article_categories:{},tableStatus:{enable:[],recommend:[],top:[],access_type:[]},feeds:{data:[],total:0,current_page:1,per_page:10},columns:[{title:">>",type:"expand",width:50,render:function(e,t){return e(o.default,{props:{row:t.row}})}},{title:"ID",key:"id",sortable:!0,width:100},{title:"标题",key:"title",width:150},{title:"封面",width:150,render:function(t,a){var n=e;if(a.row.cover_image.url)return t("div",[t("img",{attrs:{src:a.row.cover_image.url},style:{width:"40px",height:"40px"},on:{click:function(e){n.modalHeadImage.show=!0,n.modalHeadImage.url=a.row.cover_image.url}}})])}},{title:"分类",width:100,render:function(e,t){return e("div",t.row.category.name)}},{title:"标签",width:200,render:function(e,t){var a=t.row.tags,n="";for(var r in a)n+=r<1?a[r].name:"、"+a[r].name;return e("div",n)}},{title:"置顶",width:150,render:function(e,t){var a=t.row,n="green",r="置顶";return"F"===a.top&&(r="非置顶",n="default"),e("div",[e("Tag",{props:{type:"dot",color:n}},r)])}},{title:"推荐",width:150,render:function(e,t){var a=t.row,n="green",r="推荐";return"F"===a.recommend&&(r="非推荐",n="default"),e("div",[e("Tag",{props:{type:"dot",color:n}},r)])}},{title:"启用状态",key:"enable",render:function(t,a){return t("i-switch",{props:{slot:"open",type:"primary",value:"T"===a.row.enable},on:{"on-change":function(t){e.switchEnable(a.index)}}})}},{title:"创建时间",sortable:!0,key:"created_at"},{title:"操作",render:function(t,a){var n=e;return t("div",[t("Button",{props:{type:"success",size:"small"},on:{click:function(){e.$router.push({name:"edit-article",params:{article_id:a.row.id}})}}},"Edit"),t("Poptip",{props:{confirm:!0,title:"您确定要删除「"+a.row.name+"」？",transfer:!0},on:{"on-ok":function(){n.deleteBtn(a.row.id,a.index)}}},[t("Button",{style:{margin:"0 5px"},props:{type:"error",size:"small",placement:"top"}},"删除")])])}}]}},created:function(){var e=this;e.getList(e.feeds.current_page),e.getTableStatus(),e.getArticleCategories()},methods:{getTableStatus:function(){var e=this;e.$util.ajax.get("/common_get_table_status/articles").then(function(t){var a=t.data;e.tableStatus.enable=a.data.enable,e.tableStatus.recommend=a.data.recommend,e.tableStatus.top=a.data.top},function(e){})},getArticleCategories:function(){var e=this;e.$util.ajax.get("/admin/categories/all").then(function(t){var a=t.data;e.article_categories=a.data},function(e){})},handleOnPageChange:function(e){this.getList(e)},getList:function(e){var t=this;t.loading=!0,t.feeds.current_page=e,t.$util.ajax.get("/admin/articles?page="+e+"&per_page="+t.feeds.per_page+"&search_data="+(0,s.default)(t.search)).then(function(e){var a=e.data;t.feeds.data=a.data,t.feeds.total=a.meta.total,t.loading=!1},function(e){t.$Notice.warning({title:"出错了",desc:e.message}),t.loading=!1})},addBtn:function(){this.$router.push({name:"add-article"})},deleteBtn:function(e,t){var a=this;a.$util.ajax.delete("/admin/articles/"+e).then(function(e){var n=e.data;a.feeds.data.splice(t,1),a.$Notice.success({title:n.message})},function(e){a.$Notice.warning({title:"出错了",desc:e.message})})},switchEnable:function(e){var t=this,a="T";"T"===t.feeds.data[e].enable&&(a="F"),t.$util.ajax.post("/common_switch_enable",{table:"articles",id:t.feeds.data[e].id,value:a}).then(function(n){t.feeds.data[e].enable=a;var r=n.data;t.$Notice.success({title:r.message})},function(e){t.$Notice.warning({title:"出错了",desc:e.message})})}}}},508:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{row:Object}}},908:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(508),r=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);var i=a(909),o=a.n(i),l=a(3),c=l(r.a,o.a,!1,null,null,null);c.options.__file="src/views/news-system/articles/list-table-expand.vue",t.default=c.exports},909:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Col",{attrs:{span:"8"}},[a("Card",[a("Row",{staticClass:"expand-row"},[a("p",{staticClass:"margin-top-10"},[a("b",[e._v("信息")]),e._v(" "),a("transition",{attrs:{name:"publish-time"}},[a("div",{staticClass:"publish-time-picker-con"},[a("div",{staticClass:"margin-top-10"},[e._v(" slug：   \n                                "),a("span",{staticClass:"green-color"},[e._v(e._s(e.row.slug))])]),e._v(" "),a("div",{staticClass:"margin-top-10"},[e._v(" 作者：\n                                "),a("span",{staticClass:"green-color"},[e._v(" "+e._s(e.row.user.name)+" ")])]),e._v(" "),a("div",{staticClass:"margin-top-10"},[e._v(" 访问方式：\n                                "),"PUB"===e.row.access_type?a("span",{staticClass:"green-color"},[e._v(" 公开  ")]):"PWD"===e.row.access_type?a("span",{staticClass:"green-color"},[e._v("  密码 + ****  ")]):a("span",{staticClass:"green-color"},[e._v("  私密  ")])])])])],1)])],1)],1)],1)},r=[];n._withStripped=!0;var s={render:n,staticRenderFns:r};t.default=s},910:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"news_system-advertisement_positions-list"}},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"end",gutter:16}},[a("Col",{attrs:{span:"3"}},[a("Input",{attrs:{icon:"search",placeholder:"请输入标题..."},model:{value:e.search.title,callback:function(t){e.$set(e.search,"title",t)},expression:"search.title"}})],1),e._v(" "),a("Col",{attrs:{span:"2"}},[a("Select",{attrs:{placeholder:"是否启用"},model:{value:e.search.enable,callback:function(t){e.$set(e.search,"enable",t)},expression:"search.enable"}},[a("Option",{key:"",attrs:{value:""}},[e._v("全部")]),e._v(" "),e._l(e.tableStatus.enable,function(t,n){return a("Option",{key:n,attrs:{value:n}},[e._v(e._s(t))])})],2)],1),e._v(" "),a("Col",{attrs:{span:"2"}},[a("Select",{attrs:{placeholder:"分类",filterable:""},model:{value:e.search.category_id,callback:function(t){e.$set(e.search,"category_id",t)},expression:"search.category_id"}},[a("Option",{key:"",attrs:{value:""}},[e._v("全部")]),e._v(" "),e._l(e.article_categories,function(t,n){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name)+"\n                ")])})],2)],1),e._v(" "),a("Col",{attrs:{span:"2"}},[a("Select",{attrs:{placeholder:"推荐",filterable:""},model:{value:e.search.recommend,callback:function(t){e.$set(e.search,"recommend",t)},expression:"search.recommend"}},[a("Option",{key:"",attrs:{value:""}},[e._v("全部")]),e._v(" "),e._l(e.tableStatus.recommend,function(t,n){return a("Option",{key:n,attrs:{value:n}},[e._v(e._s(t)+"\n                ")])})],2)],1),e._v(" "),a("Col",{attrs:{span:"2"}},[a("Select",{attrs:{placeholder:"置顶",filterable:""},model:{value:e.search.top,callback:function(t){e.$set(e.search,"top",t)},expression:"search.top"}},[a("Option",{key:"",attrs:{value:""}},[e._v("全部")]),e._v(" "),e._l(e.tableStatus.top,function(t,n){return a("Option",{key:n,attrs:{value:n}},[e._v(e._s(t)+"\n                ")])})],2)],1),e._v(" "),a("Col",{attrs:{span:"2"}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:function(t){e.getList(1)}}},[e._v("Search")])],1),e._v(" "),a("Col",{attrs:{span:"2"}},[a("Button",{attrs:{type:"success",icon:"plus"},on:{click:function(t){e.addBtn()}}},[e._v("Add")])],1)],1),e._v(" "),a("br"),e._v(" "),a("Row",[a("Table",{attrs:{border:"",columns:e.columns,data:e.feeds.data,loading:e.loading}}),e._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{staticClass:"paging",attrs:{total:e.feeds.total,current:e.feeds.current_page,"page-size":e.feeds.per_page,"show-elevator":"","show-total":""},on:{"on-change":e.handleOnPageChange}})],1)])],1),e._v(" "),a("Modal",{attrs:{width:"1000px"},model:{value:e.modalHeadImage.show,callback:function(t){e.$set(e.modalHeadImage,"show",t)},expression:"modalHeadImage.show"}},[a("p",{attrs:{slot:"header"},slot:"header"},[e._v("图片预览")]),e._v(" "),a("div",{staticClass:"text-center"},[e.modalHeadImage.show?a("img",{staticClass:"center-align",attrs:{src:e.modalHeadImage.url,alt:""}}):e._e()]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})])],1)},r=[];n._withStripped=!0;var s={render:n,staticRenderFns:r};t.default=s}});